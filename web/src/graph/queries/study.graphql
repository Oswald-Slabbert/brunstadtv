fragment Task on Task {
    __typename
    id
    title
    completed
    ... on AlternativesTask {
        alternatives {
            title
            isCorrect
        }
    }
    ... on PosterTask {
        image
    }
    ... on QuoteTask {
        image
    }
    ... on LinkTask {
        secondaryTitle
        link {
            type
            title
            url
            image
            description
        }
    }
    ... on VideoTask {
        secondaryTitle
        episode {
            id
            image
            title
            description
        }
    }
}

fragment LessonLink on Link {
    image
    title
    description
    url
}

query getStudyLesson($lessonId: ID!, $episodeId: ID!) {
    studyLesson(id: $lessonId) {
        id
        title
        progress {
            total
            completed
        }
        tasks {
            items {
                ...Task
            }
        }
        links {
            items {
                ...LessonLink
            }
        }
    }
    episode(id: $episodeId) {
        id
        title
        image
    }
}

mutation completeTask($taskId: ID!) {
    completeTask(id: $taskId)
}

mutation sendTaskMessage($taskId: ID!, $message: String!) {
    sendTaskMessage(taskId: $taskId, message: $message)
}
