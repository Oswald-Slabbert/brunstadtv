fragment EpisodeItem on SectionItem {
    item {
        ... on Episode {
            episodeNumber: number
            season {
                show {
                    title
                }
                number
            }
        }
    }
}

fragment SeasonItem on SectionItem {
    item {
        ... on Season {
            seasonNumber: number
            show {
                title
            }
        }
    }
}

fragment ShowItem on SectionItem {
    item {
        ... on Show {
            title
        }
    }
}

fragment PageItem on SectionItem {
    item {
        ... on Page {
            code
        }
    }
}

fragment Section on ItemSection {
    __typename
    items {
        items {
            __typename
            id
            title
            image
            sort
            item {
                __typename
            }
            ...EpisodeItem
            ...SeasonItem
            ...ShowItem
            ...PageItem
        }
    }
}

query getPage($code: String!) {
    page(code: $code) {
        id
        title
        sections {
            items {
                __typename
                id
                title
                ...Section
            }
        }
    }
}
