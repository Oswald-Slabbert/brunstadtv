fragment Season on Season {
    id
    title
    image(style: default)
    number
    episodes(first: $firstEpisodes, offset: $offsetEpisodes) {
        total
        items {
            id
            publishDate
            number
            title
            image
            progress
            duration
            description
            ageRating
        }
    }
    show {
        id
        title
        description
        type
        image(style: default)
    }
}

query getSeasonOnEpisodePage(
    $seasonId: ID!
    $firstEpisodes: Int
    $offsetEpisodes: Int
) {
    season(id: $seasonId) {
        ...Season
    }
}

query getEpisode($episodeId: ID!) {
    episode(id: $episodeId) {
        id
        title
        description
        image(style: default)
        number
        progress
        ageRating
        productionDate
        availableFrom
        availableTo
        publishDate
        duration
        season {
            id
            title
            number
            description
            show {
                title
                type
                description
                seasons {
                    items {
                        id
                        title
                        number
                    }
                }
            }
        }
    }
}

mutation updateEpisodeProgress(
    $episodeId: ID!
    $progress: Int
    $duration: Int
) {
    setEpisodeProgress(
        id: $episodeId
        progress: $progress
        duration: $duration
    ) {
        progress
    }
}
